generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String      @id @default(uuid())
  email     String      @unique
  username  String      @unique
  NIC       String      @unique
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  password  String
  eventUser eventUser[]
}

model Event {
  eventId        Int             @id @default(autoincrement())
  eventName      String
  eventDate      DateTime
  eventVenue     String
  eventPosterUrl String
  ticketDetails  TicketDetails[]
  eventUsers     eventUser[]
  artists        Artist[]        @relation("EventArtists")
}

model TicketDetails {
  ticketId    String      @id @default(uuid())
  ticketPrice Float
  ticketQty   Int
  ticketType  String
  eventId     Int
  event       Event       @relation(fields: [eventId], references: [eventId])
  eventUser   eventUser[]
}

model eventUser {
  eventId         Int
  userId          String
  ticketId        String
  numberOfTickets Int
  orderId         String        @id @default(uuid())
  event           Event         @relation(fields: [eventId], references: [eventId])
  ticket          TicketDetails @relation(fields: [ticketId], references: [ticketId])
  user            User          @relation(fields: [userId], references: [id])
}

model Artist {
  artistId       String  @id @default(uuid())
  artistName     String
  artistImageUrl String
  event          Event[] @relation("EventArtists")
}
